/**
 * Project: AMMOS Mission Data Processing and Control System (AMPCS)
 * File:    Generic demonstration README file
 *
 * Copyright (c) 2015 California Institute of Technology. All rights reserved.
 */

This examples directory contains dictionary files and sample data
that can be used to demonstrate some of the capability of AMPCS.

The dictionary directory contains dictionary files that can be used
to run the sample data or command files.  It also contains some 
decommutation map examples, which are not used to process this test data.

The data directory contains these sample data files:

channel.raw_pkt - CCSDS packets from which channelized telemetry can be extracted.
                  It contains at least one of every Channel ID in the 
                  dictionary.
channel_stats.txt - Gives some information about the content of the data file,
                    including time range, packet APIDs, number of channel
                    samples for each channel ID, etc.


evr.raw_pkt - CCSDS packets from which spacecraft event records (EVRs) can be
              extracted. It contains at least on of every EVR ID in the
              dictionary.
evr_stats.txt - Gives some information about the content of the data file,
      		including time range, packet APIDs, number of
                EVRs for each event ID, etc.


example_commands.txt - An example command list file, which includes one
                       of every command in the dictionary.


Monitoring with a GUI
---------------------
To run a monitoring GUI instance while performing the steps below:

$CHILL_GDS/bin/chill_monitor --fswDictionaryDir $CHILL_GDS/examples/dictionary --fswVersion demo_v1 --autoRun

Click the Channel List Tab
Right click anywhere on the panel and select "Select Channels..."
Select some telemetry chanels from the scrolling panel on the left
Click the >>> button to move them to the right
Click Ok

Information generated by the steps below will appear on the Status, Command List, Channel List, and EVR tabs of this GUI.


Processing Channelized Telemetry
--------------------------------
To start a downlink processor GUI instance with the channel data file:

$CHILL_GDS/bin/chill_down --venueType TESTSET --fswDictionaryDir $CHILL_GDS/examples/dictionary --downlinkConnectionType FILE --autoRun $CHILL_GDS/examples/data/channel.raw_pkt 

Click the green arrow to start the data. 

When the data file is finished, the GUI will report the session key. 
It is also on the window title bar. Record this key.

To see the resulting packet metadata:

$CHILL_GDS/bin/chill_get_packets -K <key-from-above> -m

To see the resulting telemetry samples:

$CHILL_GDS/bin/chill_get_chanvals -K <key-from-above> -m

Processing EVRs
---------------
To start a downlink processor GUI instance with the EVR data file:

$CHILL_GDS/bin/chill_down --venueType TESTSET --fswDictionaryDir $CHILL_GDS/examples/dictionary --downlinkConnectionType FILE --autoRun $CHILL_GDS/examples/data/evr.raw_pkt 

Click the green arrow to start the data. 

When the data file is finished, the GUI will report the session key. 
it is also on the window title bar.record this key.

To see the resulting packet metadata:

$CHILL_GDS/bin/chill_get_packets -K <key-from-above> -m

To see the resulting event records:

$CHILL_GDS/bin/chill_get_evrs -K <key-from-above> -m


Sending Commands with the GUI
-----------------------------
To start an uplink GUI instance:

First you need to fake a command receiver by running this in the background:

$CHILL_GDS/bin/tools/chill_get_from_socket 12345 /tmp/cltu.dat &

$CHILL_GDS/bin/chill_up --venueType TESTSET --fswDictionaryDir $CHILL_GDS/examples/dictionary --autoRun

Click the Immediate Command tab. 
Select the Command List radio button. 
Click the Load button and browse to $CHILL_GDS/examples/data/example_commands.txt
Click Send

Alternatively, you can click the Command Builder tab.
Build a command yourself.
Then click send.

On the window title bar, there is a session key in parenthesis. Record it.

To see the resulting command logs:

$CHILL_GDS/bin/chill_get_commands -K <key-from-above> -m

The binary CLTUs captured from the commands you sent will be in file /tmp/cltu.dat.

Don't forget to kill the chill_get_from_socket process when you are finished.










